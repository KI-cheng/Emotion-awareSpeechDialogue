# 3 Methodology

In this section, we describe the approach taken to build an affective dialogue system based on a large language model. The system senses and responds to user emotions through a complex multi-module architecture.
Includes: automatic speech recognition, emotion reasoning, empathetic response generation, and text-to-speech response.

## 3.1 Real-time speech detection and (ASR) module

To facilitate voice-driven interactions, we integrated an ASR module to transcribe speech input into text. This module needs to monitor and record user speech clips in real time and support multiple languages to enhance system accessibility. When the speech clips are detected dynamically, they are converted into text transcriptions as input for subsequent sentiment analysis. This design ensures seamless integration with the core emotion recognition framework.

## 3.2 Emotion Inference and Empathetic Response Generation

The core of the system's functionality is its ability to infer user emotions and generate empathetic responses. We developed an architecture with multiple LLMs working together around this core functionality. This part of the module is implemented by combining fine-tuned model small parameter LLMs and large parameter LLM interfaces. The fine-tuned small parameter model can quickly and accurately infer user emotions while being deployed locally, and can be combined with the API to call the large parameter model to accurately understand emotions and text content for quick response. The prompt word engineering design method is used to further improve LLM's understanding of user emotions and conversation content, and generate highly empathetic responses.

## 3.3 Text-to-speech (TTS) module

Since the input of the entire system architecture is the user's voice, using voice as the output of the dialogue system can further improve the user experience. In this module, we further convert the responses generated by LLM into voice and return them to the user. And combined with the audio playback function, a complete dialogue logic closed loop is achieved.
